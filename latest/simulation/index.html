<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <meta name="author" content="Twan Koolen">
  <link rel="shortcut icon" href="../img/favicon.ico">
  <title>Simulation - RigidBodyDynamics.jl</title>
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="../css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="../css/highlight.css">
  <link href="../assets/Documenter.css" rel="stylesheet">
  
  <script>
    // Current page data
    var mkdocs_page_name = "Simulation";
    var mkdocs_page_input_path = "simulation.md";
    var mkdocs_page_url = "/simulation/";
  </script>
  
  <script src="../js/jquery-2.1.1.min.js"></script>
  <script src="../js/modernizr-2.8.3.min.js"></script>
  <script type="text/javascript" src="../js/highlight.pack.js"></script> 
  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <a href=".." class="icon icon-home"> RigidBodyDynamics.jl</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
	<ul class="current">
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="..">Home</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../quickstart/">Quick start guide</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../spatial/">Spatial vector algebra</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../joints/">Joints</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../rigidbody/">Rigid bodies</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../mechanism/">Mechanism</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../mechanismstate/">MechanismState</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../algorithms/">Kinematics/dynamics algorithms</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 current">
        <a class="current" href="./">Simulation</a>
        
            <ul>
            
                <li class="toctree-l3"><a href="#simulation">Simulation</a></li>
                
                    <li><a class="toctree-l4" href="#index">Index</a></li>
                
                    <li><a class="toctree-l4" href="#basic-simulation">Basic simulation</a></li>
                
                    <li><a class="toctree-l4" href="#lower-level-ode-integration-interface">Lower level ODE integration interface</a></li>
                
            
            </ul>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../benchmarks/">Benchmarks</a>
        
    </li>
<li>
          
        </ul>
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="..">RigidBodyDynamics.jl</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="..">Docs</a> &raquo;</li>
    
      
    
    <li>Simulation</li>
    <li class="wy-breadcrumbs-aside">
      
        <a href="https://github.com/tkoolen/RigidBodyDynamics.jl/edit/master/docs/simulation.md"
          class="icon icon-github"> Edit on GitHub</a>
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <p><a id='Simulation-1'></a></p>
<h1 id="simulation">Simulation</h1>
<p><a id='Index-1'></a></p>
<h2 id="index">Index</h2>
<ul>
<li><a href="./#RigidBodyDynamics.OdeIntegrators.ButcherTableau"><code>RigidBodyDynamics.OdeIntegrators.ButcherTableau</code></a></li>
<li><a href="./#RigidBodyDynamics.OdeIntegrators.ExpandingStorage"><code>RigidBodyDynamics.OdeIntegrators.ExpandingStorage</code></a></li>
<li><a href="./#RigidBodyDynamics.OdeIntegrators.MuntheKaasIntegrator"><code>RigidBodyDynamics.OdeIntegrators.MuntheKaasIntegrator</code></a></li>
<li><a href="./#RigidBodyDynamics.OdeIntegrators.OdeResultsSink"><code>RigidBodyDynamics.OdeIntegrators.OdeResultsSink</code></a></li>
<li><a href="./#RigidBodyDynamics.OdeIntegrators.RingBufferStorage"><code>RigidBodyDynamics.OdeIntegrators.RingBufferStorage</code></a></li>
<li><a href="./#Base.step-Tuple{RigidBodyDynamics.OdeIntegrators.MuntheKaasIntegrator,Real,Any,Real}"><code>Base.step</code></a></li>
<li><a href="./#RigidBodyDynamics.OdeIntegrators.integrate-Tuple{RigidBodyDynamics.OdeIntegrators.MuntheKaasIntegrator,Any,Any,Any}"><code>RigidBodyDynamics.OdeIntegrators.integrate</code></a></li>
<li><a href="./#RigidBodyDynamics.OdeIntegrators.runge_kutta_4-Tuple{Type{T}}"><code>RigidBodyDynamics.OdeIntegrators.runge_kutta_4</code></a></li>
<li><a href="./#RigidBodyDynamics.simulate"><code>RigidBodyDynamics.simulate</code></a></li>
</ul>
<p><a id='Basic-simulation-1'></a></p>
<h2 id="basic-simulation">Basic simulation</h2>
<p><a id='RigidBodyDynamics.simulate' href='#RigidBodyDynamics.simulate'>#</a>
<strong><code>RigidBodyDynamics.simulate</code></strong> &mdash; <em>Function</em>.</p>
<pre><code class="julia">simulate(state0, finalTime; Δt)

</code></pre>

<p>Simple <code>Mechanism</code> simulation: integrate the state from time $0$ to <code>finalTime</code> starting from the initial state <code>state0</code>. Return a <code>Vector</code> of times, as well as <code>Vector</code>s of configuration vectors and velocity vectors at these times.</p>
<p>Uses <code>MuntheKaasIntegrator</code>. See <a href="./#RigidBodyDynamics.OdeIntegrators.MuntheKaasIntegrator"><code>MuntheKaasIntegrator</code></a> for a lower level interface with more options.</p>
<p><a target='_blank' href='https://github.com/tkoolen/RigidBodyDynamics.jl/tree/6fcd30fe7ee6803f90676f3e109e5056bc2a37d0/src/simulate.jl#L3' class='documenter-source'>source</a><br></p>
<p><a id='Lower-level-ODE-integration-interface-1'></a></p>
<h2 id="lower-level-ode-integration-interface">Lower level ODE integration interface</h2>
<p><a id='RigidBodyDynamics.OdeIntegrators.ExpandingStorage' href='#RigidBodyDynamics.OdeIntegrators.ExpandingStorage'>#</a>
<strong><code>RigidBodyDynamics.OdeIntegrators.ExpandingStorage</code></strong> &mdash; <em>Type</em>.</p>
<pre><code class="julia">type ExpandingStorage{T} &lt;: RigidBodyDynamics.OdeIntegrators.OdeResultsSink
</code></pre>

<p>An <code>OdeResultsSink</code> that stores the state at each integration time step in <code>Vectors</code> that may expand.</p>
<p><a target='_blank' href='https://github.com/tkoolen/RigidBodyDynamics.jl/tree/6fcd30fe7ee6803f90676f3e109e5056bc2a37d0/src/ode_integrators.jl#L108' class='documenter-source'>source</a><br></p>
<p><a id='RigidBodyDynamics.OdeIntegrators.MuntheKaasIntegrator' href='#RigidBodyDynamics.OdeIntegrators.MuntheKaasIntegrator'>#</a>
<strong><code>RigidBodyDynamics.OdeIntegrators.MuntheKaasIntegrator</code></strong> &mdash; <em>Type</em>.</p>
<p>A Lie-group-aware ODE integrator.</p>
<p><code>MuntheKaasIntegrator</code> is used to properly integrate the dynamics of globally parameterized rigid joints (Duindam, Port-Based Modeling and Control for Efficient Bipedal Walking Robots, 2006, Definition 2.9). Global parameterizations of e.g. $SO(3)$ are needed to avoid singularities, but this leads to the problem that the tangent space no longer has the same dimension as the ambient space of the global parameterization. A Munthe-Kaas integrator solves this problem by converting back and forth between local and global coordinates at every integration time step.</p>
<p>The idea is to do the dynamics and compute the stages of the integration scheme in terms of local coordinates centered around the global parameterization of the configuration at the end of the previous time step (e.g. exponential coordinates), combine the stages into a new set of local coordinates as usual for Runge-Kutta methods, and then convert the local coordinates back to global coordinates.</p>
<p>From <a href="https://hal.archives-ouvertes.fr/hal-01328729">Iserles et al., 'Lie-group methods' (2000)</a>.</p>
<p>Another useful reference is <a href="http://www.ent.mrt.ac.lk/iml/paperbase/TRO%20Collection/TRO/2005/october/7.pdf">Park and Chung, 'Geometric Integration on Euclidean Group with Application to Articulated Multibody Systems' (2005)</a>.</p>
<p><a target='_blank' href='https://github.com/tkoolen/RigidBodyDynamics.jl/tree/6fcd30fe7ee6803f90676f3e109e5056bc2a37d0/src/ode_integrators.jl#L168-L188' class='documenter-source'>source</a><br></p>
<p><a id='RigidBodyDynamics.OdeIntegrators.OdeResultsSink' href='#RigidBodyDynamics.OdeIntegrators.OdeResultsSink'>#</a>
<strong><code>RigidBodyDynamics.OdeIntegrators.OdeResultsSink</code></strong> &mdash; <em>Type</em>.</p>
<pre><code class="julia">abstract OdeResultsSink
</code></pre>

<p>Does 'something' with the results of an ODE integration (e.g. storing results, visualizing, etc.). Subtypes must implement:</p>
<ul>
<li><code>initialize(sink, state)</code>: called with the initial state when integration begins.</li>
<li><code>process(sink, t, state)</code>: called at every integration time step with the current state and time.</li>
</ul>
<p><a target='_blank' href='https://github.com/tkoolen/RigidBodyDynamics.jl/tree/6fcd30fe7ee6803f90676f3e109e5056bc2a37d0/src/ode_integrators.jl#L57' class='documenter-source'>source</a><br></p>
<p><a id='RigidBodyDynamics.OdeIntegrators.RingBufferStorage' href='#RigidBodyDynamics.OdeIntegrators.RingBufferStorage'>#</a>
<strong><code>RigidBodyDynamics.OdeIntegrators.RingBufferStorage</code></strong> &mdash; <em>Type</em>.</p>
<pre><code class="julia">type RingBufferStorage{T} &lt;: RigidBodyDynamics.OdeIntegrators.OdeResultsSink
</code></pre>

<p>An <code>OdeResultsSink</code> that stores the state at each integration time step in a ring buffer.</p>
<p><a target='_blank' href='https://github.com/tkoolen/RigidBodyDynamics.jl/tree/6fcd30fe7ee6803f90676f3e109e5056bc2a37d0/src/ode_integrators.jl#L69' class='documenter-source'>source</a><br></p>
<p><a id='Base.step-Tuple{RigidBodyDynamics.OdeIntegrators.MuntheKaasIntegrator,Real,Any,Real}' href='#Base.step-Tuple{RigidBodyDynamics.OdeIntegrators.MuntheKaasIntegrator,Real,Any,Real}'>#</a>
<strong><code>Base.step</code></strong> &mdash; <em>Method</em>.</p>
<pre><code class="julia">step(integrator, t, state, Δt)

</code></pre>

<p>Take a single integration step.</p>
<p><code>state</code> must be of a type for which the following functions are defined:</p>
<ul>
<li><code>configuration_vector(state)</code>, returns the configuration vector in global coordinates.</li>
<li><code>velocity_vector(state)</code>, returns the velocity vector.</li>
<li><code>set_velocity!(state, v)</code>, sets velocity vector to v.</li>
<li><code>global_coordinates!(state, q0, ϕ)</code>, sets global coordinates in state based on local coordinates <code>ϕ</code> centered around global coordinates <code>q0</code>.</li>
<li><code>local_coordinates!(state, ϕ, ϕd, q0)</code>, converts state's global configuration <code>q</code> and velocity <code>v</code> to local coordinates centered around global coordinates <code>q0</code>.</li>
</ul>
<p><a target='_blank' href='https://github.com/tkoolen/RigidBodyDynamics.jl/tree/6fcd30fe7ee6803f90676f3e109e5056bc2a37d0/src/ode_integrators.jl#L209' class='documenter-source'>source</a><br></p>
<p><a id='RigidBodyDynamics.OdeIntegrators.integrate-Tuple{RigidBodyDynamics.OdeIntegrators.MuntheKaasIntegrator,Any,Any,Any}' href='#RigidBodyDynamics.OdeIntegrators.integrate-Tuple{RigidBodyDynamics.OdeIntegrators.MuntheKaasIntegrator,Any,Any,Any}'>#</a>
<strong><code>RigidBodyDynamics.OdeIntegrators.integrate</code></strong> &mdash; <em>Method</em>.</p>
<pre><code class="julia">integrate(integrator, state0, finalTime, Δt)

</code></pre>

<p>Integrate dynamics from the initial state <code>state0</code> at time $0$ to <code>finalTime</code> using step size <code>Δt</code>.</p>
<p><a target='_blank' href='https://github.com/tkoolen/RigidBodyDynamics.jl/tree/6fcd30fe7ee6803f90676f3e109e5056bc2a37d0/src/ode_integrators.jl#L277' class='documenter-source'>source</a><br></p>
<p><a id='RigidBodyDynamics.OdeIntegrators.runge_kutta_4-Tuple{Type{T}}' href='#RigidBodyDynamics.OdeIntegrators.runge_kutta_4-Tuple{Type{T}}'>#</a>
<strong><code>RigidBodyDynamics.OdeIntegrators.runge_kutta_4</code></strong> &mdash; <em>Method</em>.</p>
<pre><code class="julia">runge_kutta_4(scalartype)

</code></pre>

<p>Return the Butcher tableau for the standard fourth order Runge-Kutta integrator.</p>
<p><a target='_blank' href='https://github.com/tkoolen/RigidBodyDynamics.jl/tree/6fcd30fe7ee6803f90676f3e109e5056bc2a37d0/src/ode_integrators.jl#L43' class='documenter-source'>source</a><br></p>
<p><a id='RigidBodyDynamics.OdeIntegrators.ButcherTableau' href='#RigidBodyDynamics.OdeIntegrators.ButcherTableau'>#</a>
<strong><code>RigidBodyDynamics.OdeIntegrators.ButcherTableau</code></strong> &mdash; <em>Type</em>.</p>
<pre><code class="julia">immutable ButcherTableau{N, T&lt;:Number, L}
</code></pre>

<p>A <a href="https://en.wikipedia.org/wiki/Runge%E2%80%93Kutta_methods#Explicit_Runge.E2.80.93Kutta_methods">Butcher tableau</a>.</p>
<p><a target='_blank' href='https://github.com/tkoolen/RigidBodyDynamics.jl/tree/6fcd30fe7ee6803f90676f3e109e5056bc2a37d0/src/ode_integrators.jl#L18' class='documenter-source'>source</a><br></p>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../benchmarks/" class="btn btn-neutral float-right" title="Benchmarks">Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../algorithms/" class="btn btn-neutral" title="Kinematics/dynamics algorithms"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="http://www.mkdocs.org">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
	  
        </div>
      </div>

    </section>
    
  </div>

  <div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
          <a href="https://github.com/tkoolen/RigidBodyDynamics.jl/" class="icon icon-github" style="float: left; color: #fcfcfc"> GitHub</a>
      
      
        <span><a href="../algorithms/" style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="../benchmarks/" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>
    <script src="../js/theme.js"></script>
      <script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
      <script src="../assets/mathjaxhelper.js"></script>

</body>
</html>
